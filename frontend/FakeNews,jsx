import React, { useState } from 'react'


export default function FakeNewsApp(){
const [text, setText] = useState('')
const [result, setResult] = useState(null)
const [loading, setLoading] = useState(false)
const [error, setError] = useState(null)


const handleSubmit = async (e) => {
e.preventDefault()
setLoading(true)
setError(null)
setResult(null)
try {
const res = await fetch('http://localhost:5000/predict', {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ text })
})
const data = await res.json()
if (!res.ok) throw new Error(data.error || 'Request failed')
setResult(data)
} catch (err) {
setError(err.message)
} finally { setLoading(false) }
}


return (
<div className="p-4 max-w-3xl mx-auto">
<h1 className="text-2xl font-bold mb-4">Fake News Detector</h1>
<form onSubmit={handleSubmit}>
<textarea value={text} onChange={e=>setText(e.target.value)} rows={6} className="w-full p-2 border rounded" placeholder="Paste article or headline here" />
<div className="mt-3 flex gap-2">
<button className="px-4 py-2 rounded bg-blue-600 text-white" disabled={loading}>Analyze</button>
<button type="button" className="px-4 py-2 rounded border" onClick={()=>{setText('')}}>Clear</button>
</div>
</form>


{loading && <p className="mt-3">Analyzingâ€¦</p>}
{error && <p className="mt-3 text-red-600">Error: {error}</p>}
{result && (
<div className="mt-4 p-3 border rounded">
<p><strong>Prediction:</strong> {result.label_name.toUpperCase()}</p>
{result.probabilities && (
<p>Probabilities (real, fake): {result.probabilities.map(p => p.toFixed(3)).join(', ')}</p>
)}
</div>
)}
</div>
)
}